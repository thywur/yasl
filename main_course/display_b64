#!yasl_linux

// Check that the program did not receive any argument

1
!=
? ("No argument required\n" print 1 exit)

// Read on the standard input

read
=:1
0 == ? ("Empty image\n" print exit 1)
@(
    read
	=:1 1:+:1
	+
)

// Check wether the amount of character read in a multiple of 4

1:=
4
%
0 != ? ("Error: Uncomplete image\n" print 1 exit)


// Divide the amount of character read by 4 to get the number of pixels

1:=
4
/
=:3
"Image received, nb pixels : " print 3:print "\n" print

{
	=:2
	1:3
	@(
		3:=:0
		= *
		= 2:=:0 == ? (3:=:4 0) : (1:3 3:+:3) 	//result saved in stack 4
	)
}	sqrt // Function to get the square root

sqrt
4:# 1 != ? ("Error: Image is not a square\n" print 1 exit)

4:=
"Found square : " print print "\n" print

4:=
#(
	4:=
	#(
		"\e[48;2;125;0;0m  \e[0m" print
	)
	"\n" print
)
